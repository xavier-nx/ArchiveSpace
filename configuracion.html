<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuración - ArchiveSpace</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard.html">
                <i class="bi bi-archive"></i> ArchiveSpace
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#configNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="configNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="admin-usuarios.html">
                            <i class="bi bi-people"></i> Usuarios
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="configuracion.html">
                            <i class="bi bi-gear"></i> Configuración
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="configLogoutBtn">
                            <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
        <div class="row">
            <main class="col-md-12">
                <!-- Page Header -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">
                        <i class="bi bi-gear"></i> Configuración del Sistema
                    </h1>
                    <button class="btn btn-primary" id="saveAllConfig">
                        <i class="bi bi-save"></i> Guardar Todo
                    </button>
                </div>

                <!-- Configuration Tabs -->
                <ul class="nav nav-tabs mb-4" id="configTabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#generalConfig">
                            <i class="bi bi-sliders"></i> General
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#repositoriesConfig">
                            <i class="bi bi-archive"></i> Repositorios
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#backupConfig">
                            <i class="bi bi-cloud-arrow-down"></i> Backup
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#helpConfig">
                            <i class="bi bi-question-circle"></i> Ayuda
                        </a>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content" id="configContent">
                    <!-- General Configuration -->
                    <div class="tab-pane fade show active" id="generalConfig">
                        <div class="card">
                            <div class="card-body">
                                <form id="generalConfigForm">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">Nombre del Sistema</label>
                                                <input type="text" class="form-control" 
                                                       id="systemName" value="ArchiveSpace">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Idioma</label>
                                                <select class="form-select" id="systemLanguage">
                                                    <option value="es">Español</option>
                                                    <option value="en">English</option>
                                                    <option value="fr">Français</option>
                                                    <option value="pt">Português</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">Zona Horaria</label>
                                                <select class="form-select" id="timezone">
                                                    <option value="UTC-5">UTC-5 (Colombia, Perú)</option>
                                                    <option value="UTC-6">UTC-6 (México Central)</option>
                                                    <option value="UTC-3">UTC-3 (Argentina, Chile)</option>
                                                    <option value="UTC">UTC (GMT)</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Tiempo de sesión (minutos)</label>
                                                <input type="number" class="form-control" 
                                                       id="sessionTimeout" value="30" min="5" max="480">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="enableNotifications">
                                            <label class="form-check-label" for="enableNotifications">
                                                Habilitar notificaciones del sistema
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="enableAuditLog">
                                            <label class="form-check-label" for="enableAuditLog">
                                                Mantener registro de auditoría
                                            </label>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Repositories Configuration -->
                    <div class="tab-pane fade" id="repositoriesConfig">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Repositorios Configurados</h5>
                                <button class="btn btn-sm btn-primary" id="addRepoBtn">
                                    <i class="bi bi-plus-circle"></i> Nuevo Repositorio
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover" id="repositoriesTable">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Código</th>
                                                <th>Nombre</th>
                                                <th>Descripción</th>
                                                <th>Estado</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Repositories will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Backup Configuration -->
                    <div class="tab-pane fade" id="backupConfig">
                        <div class="card">
                            <div class="card-body">
                                <form id="backupConfigForm">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">Frecuencia de Backup</label>
                                                <select class="form-select" id="backupFrequency">
                                                    <option value="daily">Diario</option>
                                                    <option value="weekly">Semanal</option>
                                                    <option value="monthly">Mensual</option>
                                                    <option value="manual">Manual</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Hora del Backup</label>
                                                <input type="time" class="form-control" 
                                                       id="backupTime" value="02:00">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">Retención de Backups (días)</label>
                                                <input type="number" class="form-control" 
                                                       id="backupRetention" value="30" min="1" max="365">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Formato de Exportación</label>
                                                <select class="form-select" id="exportFormat" multiple>
                                                    <option value="json" selected>JSON</option>
                                                    <option value="csv" selected>CSV</option>
                                                    <option value="xml">XML</option>
                                                    <option value="ead">EAD</option>
                                                </select>
                                                <small class="text-muted">Mantenga Ctrl para seleccionar múltiples formatos</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="alert alert-info">
                                        <i class="bi bi-info-circle"></i>
                                        Los backups se almacenan localmente en el navegador. Para backup persistente,
                                        exporte manualmente los datos.
                                    </div>
                                    
                                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                        <button type="button" class="btn btn-outline-primary" id="exportDataBtn">
                                            <i class="bi bi-download"></i> Exportar Datos
                                        </button>
                                        <button type="button" class="btn btn-outline-success" id="importDataBtn">
                                            <i class="bi bi-upload"></i> Importar Datos
                                        </button>
                                        <button type="button" class="btn btn-outline-warning" id="backupNowBtn">
                                            <i class="bi bi-cloud-arrow-up"></i> Backup Ahora
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Help Configuration -->
                    <div class="tab-pane fade" id="helpConfig">
                        <div class="card">
                            <div class="card-body">
                                <div class="mb-4">
                                    <h5>Ayuda Contextual</h5>
                                    <p>Configure la ayuda en línea para los usuarios del sistema.</p>
                                    
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" 
                                               id="enableContextHelp" checked>
                                        <label class="form-check-label" for="enableContextHelp">
                                            Mostrar ayuda contextual en formularios
                                        </label>
                                    </div>
                                    
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" 
                                               id="enableTooltips" checked>
                                        <label class="form-check-label" for="enableTooltips">
                                            Mostrar tooltips explicativos
                                        </label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Nivel de Ayuda</label>
                                        <select class="form-select" id="helpLevel">
                                            <option value="basic">Básico</option>
                                            <option value="detailed" selected>Detallado</option>
                                            <option value="expert">Experto</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h5>Información del Sistema</h5>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p><strong>Versión:</strong> 1.0.0 (Sprint 1)</p>
                                            <p><strong>Última actualización:</strong> <span id="lastUpdate">Cargando...</span></p>
                                            <p><strong>Usuarios registrados:</strong> <span id="totalUsers">0</span></p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><strong>Repositorios:</strong> <span id="totalRepos">0</span></p>
                                            <p><strong>Roles configurados:</strong> <span id="totalRoles">0</span></p>
                                            <p><strong>Actividades registradas:</strong> <span id="totalActivities">0</span></p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="alert alert-warning">
                                    <h6><i class="bi bi-exclamation-triangle"></i> Acciones del Sistema</h6>
                                    <p class="mb-2">Las siguientes acciones afectan a todo el sistema:</p>
                                    <div class="d-grid gap-2 d-md-flex">
                                        <button class="btn btn-outline-danger" id="clearCacheBtn">
                                            <i class="bi bi-trash"></i> Limpiar Cache
                                        </button>
                                        <button class="btn btn-outline-danger" id="resetDemoBtn">
                                            <i class="bi bi-arrow-clockwise"></i> Restaurar Datos Demo
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <!-- Config JS -->
    <script src="js/config.js"></script>
    <script src="js/common.js"></script>
</body>
</html>